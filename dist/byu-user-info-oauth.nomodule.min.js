var ByuUserInfoOAuth=function(){"use strict";var e="byu-browser-oauth-login-requested",t="byu-browser-oauth-logout-requested",n="unauthenticated",o="authenticated",r=function(e,t){void 0===t&&(t={});var n=t.notifyCurrent;void 0===n&&(n=!0),this._listener=function(t){e(t.detail)},document.addEventListener("byu-browser-oauth-state-changed",this._listener,!1),n&&u("byu-browser-oauth-current-info-requested",{callback:e})};function i(e){return window.Promise?new Promise(function(t,n){var o=new r(function(r){var i=r.state,u=r.token,s=r.user,a=r.error;a?(n(a),o.offStateChange()):e.indexOf(i)>=0&&(t({state:i,token:u,user:s}),o.disconnect())})}):{then:function(){},catch:function(){},finally:function(){}}}function u(e,t){var n;"function"==typeof window.CustomEvent?n=new CustomEvent(e,{detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!1,t),document.dispatchEvent(n)}r.prototype.disconnect=function(){document.removeEventListener("byu-browser-oauth-state-changed",this._listener,!1)};var s=function(s){function a(){s.call(this)}return s&&(a.__proto__=s),a.prototype=Object.create(s&&s.prototype),a.prototype.constructor=a,a.prototype.connectedCallback=function(){var s=this;!function(r){var s=r.ownerDocument,a=s.createElement("byu-user-info");r._userInfo=a;var c=s.createElement("a");c.innerText="Sign In",c.setAttribute("slot","login"),c.addEventListener("click",function(){!async function(){var t=i([o]);u(e)}()});var d=s.createElement("a");d.innerText="Sign Out",d.setAttribute("slot","logout"),d.addEventListener("click",function(){!async function(){var e=i([n]);u(t)}()}),a.appendChild(c),a.appendChild(d),r.appendChild(a)}(this),this._observer=new r(function(e){return s.authStateChanged(e)})},a.prototype.disconnectedCallback=function(){this._observer&&(this._observer.disconnect(),this._observer=null),this._userInfo=null},a.prototype.authStateChanged=function(e){e.state,e.token;var t=e.user,n=(e.error,this._userInfo.querySelector('[slot="user-name"]')),o=!!n;if(t){var r=o?n:this.ownerDocument.createElement("span");r.setAttribute("slot","user-name"),r.innerText=t.name.givenName,o||this._userInfo.appendChild(r)}else o&&this._userInfo.removeChild(n)},a}(HTMLElement);return window.customElements.define("byu-user-info-oauth",s),s}();
//# sourceMappingURL=byu-user-info-oauth.nomodule.min.js.map
