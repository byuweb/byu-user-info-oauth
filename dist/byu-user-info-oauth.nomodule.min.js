var ByuUserInfoOAuth=function(){"use strict";var t="byu-browser-oauth-login-requested",e="byu-browser-oauth-logout-requested",n="unauthenticated",o="authenticated",r=function(t,e){void 0===e&&(e={});var n=e.notifyCurrent;void 0===n&&(n=!0),this._listener=function(e){t(e.detail)},document.addEventListener("byu-browser-oauth-state-changed",this._listener,!1),n&&u("byu-browser-oauth-current-info-requested",{callback:t})};function i(t){return window.Promise?new Promise(function(e,n){var o=new r(function(r){var i=r.state,u=r.token,s=r.user,a=r.error;a?(n(a),o.offStateChange()):t.indexOf(i)>=0&&(e({state:i,token:u,user:s}),o.disconnect())})}):{then:function(){},catch:function(){},finally:function(){}}}function u(t,e){var n;"function"==typeof window.CustomEvent?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!1,e),document.dispatchEvent(n)}r.prototype.disconnect=function(){document.removeEventListener("byu-browser-oauth-state-changed",this._listener,!1)};var s=function(s){function a(){s.call(this)}return s&&(a.__proto__=s),a.prototype=Object.create(s&&s.prototype),a.prototype.constructor=a,a.prototype.connectedCallback=function(){var s=this;!function(r){var s=r.ownerDocument,a=s.createElement("byu-user-info");r._userInfo=a;var c=s.createElement("a");c.innerText="Sign In",c.setAttribute("slot","login"),c.setAttribute("style","cursor:pointer"),c.addEventListener("click",function(e){!async function(){var e=i([o]);u(t)}(),e.stopPropagation(),e.preventDefault()});var l=s.createElement("a");l.innerText="Sign Out",l.setAttribute("slot","logout"),l.setAttribute("style","cursor:pointer"),l.addEventListener("click",function(t){!async function(){var t=i([n]);u(e)}(),t.stopPropagation(),t.preventDefault()}),a.appendChild(c),a.appendChild(l),r.appendChild(a)}(this),this._observer=new r(function(t){return s.authStateChanged(t)})},a.prototype.disconnectedCallback=function(){this._observer&&(this._observer.disconnect(),this._observer=null),this._userInfo=null},a.prototype.authStateChanged=function(t){t.state,t.token;var e=t.user,n=(t.error,this._userInfo.querySelector('[slot="user-name"]')),o=!!n;if(e){var r=o?n:this.ownerDocument.createElement("span");r.setAttribute("slot","user-name"),r.innerText=e.name.givenName,o||this._userInfo.appendChild(r)}else o&&this._userInfo.removeChild(n)},a}(HTMLElement);return window.customElements.define("byu-user-info-oauth",s),s}();
//# sourceMappingURL=byu-user-info-oauth.nomodule.min.js.map
